[toc]

# 函数式编程

函数式编程是一种编程范式（编程风格），除了函数式编程之外还有命令式编程、声明式编程、面向对象编程等编程范式。

> 命令式编程是面向计算机硬件的抽象，可以理解为冯诺依曼的指令序列。主要思想是关注计算机执行的步骤，一步一步告诉计算机先做什么后做什么。
>
> 声明式编程以数据结构的形式来表达程序执行的逻辑。主要思想是告诉计算机应该做什么，但不指定具体要怎么做。如SQL、HTML、CSS。特点是不需要创建变量来存储数据、不包括循环控制的代码如for/while等。
>
> 编程范式的选择：
>
> - **命令式**关心解决问题的步骤，更符合自然逻辑，容易理解；产生大量临时变量，代码可读性低，需要通读代码才知道具体做了什么
> - **函数式**关心数据映射，使用数学的思路去解决问题，减少了临时变量，容易维护；性能不好，容易过度抽象包装，内存容易占用过高
> - **面向对象**方便扩展，代码复用程度高

函数式编程和声明式编程是有所关联的，都只关注做什么而不是怎么做。函数式编程中的函数并不是指计算机中的函数，而是指数学中的函数，即自变量的映射。**函数式编程是面向数学的抽象，将计算描述为一种表达式求值。**特点是**函数是第一等公民、函数是纯函数**。

> 纯函数的特点：
>
> - 相同的输入必有相同的输出
> - 没有副作用（不会对外部产生影响）

函数式编程的基本运算：函数合成（将代表各个动作的多个函数合并成一个函数）、函数柯里化

# 高阶函数

满足下列条件之一的函数就是高阶函数：

- 函数作为参数被传递
- 函数作为返回值输出

## reduce(callback, initValue)
为数组中每一个元素依次执行回调函数，不包括数组中被删除或未被赋值的元素。
`callback`接收参数：`previousValue`上一次调用返回的值或提供的初始值；`currentValue`当前处理元素；`index`当前元素在数组中的索引；`array`调用reduce的数组。`initValue`第一次调用reduce的第一个参数，相当在指定数组前添加一个元素。

### 注意事项
空数组将报错

### 应用举例
```javascript
var arr = [1,2,3,4,1];
var sum = arr.reduce((x, y)=>x+y);// 10
var mul = arr.reduce((x, y)=>x*y);// 24
// 统计元素出现次数
var nameNum = arr.reduce(function(prev, cur) {
    if(cur in prev) { prev[cur]++; }
    else { prev[cur] = 1; }
    return prev;
}, {});// { 1: 2, 2: 1, 3: 1, 4: 1}
// 数组去重
var newArr = arr.reduce(function(prev, cur) {
    if(prev.includes(cur)) { return prev; }
    else { return prev.concat(cur); }
}, []);
// 二维数组降维
var newArr1 = arr1.reduce(function(prev, cur) {
    return prev.concat(cur);
}, []);
```

# 钩子函数

对系统而言：钩子函数是windows消息处理机制的一部分，通过设置钩子，应用程序可以在系统级对所有消息、事件进行过滤，访问在正常情况下无法访问的信息。本质是一段用于处理系统消息的程序。通过系统调用，把它挂入系统。

在js中：钩子函数相当于事件代理，监视事件是否发生。如果发生了就执行事件处理函数。钩子函数一般由事件发生者提供，直白的说：留下一个钩子，钩住回调方法。

