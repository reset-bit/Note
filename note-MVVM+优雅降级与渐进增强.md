

# MVC与MVVM

## MVC

`Model View Controller`，模型+视图+控制，适合后端框架

模型层：应用程序中用于处理应用程序数据逻辑的部分，通常模型对象负责在数据库中存取数据

视图层：用户界面渲染逻辑，通常是依据模型数据创建的

控制器：模型和视图之间通信的桥梁，负责从视图中读取数据、控制用户输入、向模型发送数据

### 思想

实现应用程序中的**数据模型**与**业务展示逻辑**解耦，所有通信都是单向的

### 优缺点

优：耦合度低；生命周期成本低；可维护性高；部署快

缺：不适合小型项目的开发；视图与控制器相互分离，但联系过于紧密

## MVVM

`Model View ViewModel`，模型+视图+视图模型，是MVC进阶版

模型层：后端传递的数据

视图层：看到的页面

视图模型：连接模型与视图的桥梁，主要用来处理业务逻辑

实现方向：

- 模型-视图：将后端数据转换成页面，即数据绑定
- 视图-模型：将页面转换为后端数据，即dom事件监听

### 思想

视图与模型不能直接通信，只能通过`ViewModel`来通信。`ViewModel`通常要实现一个`observer`观察者，当数据发生变化，`ViewModel`能够监听到这种变化并通知视图做自动更新。

### 优缺点

优：低耦合；可重用；独立开发；可测试；双向数据绑定

适用场景：数据驱动、数据操作频繁的场景

与MVC的最大区别：实现了view和model的自动同步

# 优雅降级 渐进增强

通过使用某些技术，当浏览器支持相应功能时文档会得到增强（渐进增强），而浏览器不支持相应功能时，文档被退化（优雅降级）。**不支持相应功能的浏览器会获得同一文档的具备相同信息量却不一样的视图。**开发人员的任务就是要开发出具有不唐突性、能够根据浏览器能力实现渐进增强或平稳退化的web应用。

两种常用策略：

1. 优雅降级GD：开始构建站点的完整内容，之后针对浏览器测试和修复。即，在开发网站应用时，先关注应用是否能在最新的浏览器上运行。在开发末期，再去考虑让老版本的浏览器支持一些关键功能。
2. 渐进增强PE：开始构建站点的最少特性，之后不断针对浏览器追加功能

> 使用优雅降级或渐进增强由用户所使用的客户端的版本来做决定。分析客户端程序占比，若低版本用户用户居多，则使用渐进增强。若高版本用户居多，则使用优雅降级。
>
> 事实上，基于业务优先，绝大多数公司都是采用渐进增强的策略。

```css
/*浏览器总是先支持前缀css3，之后支持正常*/
.transition { /*渐进增强写法*/
  -webkit-transition: all .5s;
     -moz-transition: all .5s;
       -o-transition: all .5s;
          transition: all .5s;
}
.transition { /*优雅降级写法*/
          transition: all .5s;
       -o-transition: all .5s;
     -moz-transition: all .5s;
  -webkit-transition: all .5s;
}
```

